# 위클리\_페이퍼\_02 : 사분위수와 기술/추론 통계

---

## 사분위수

**사분위수** 는 **값을 4등분**으로 나눈 **기준점**을 의미합니다.

- **1사분위수(Q1)** : **하위 25% 지점**
- **2사분위수(Q2)** : **중앙값**, 전체의 50% 지점
- **3사분위수(Q3)** : 상위 25%를 남긴 **75% 지점**

#### 예시

[2, 4, 6, 8, 10, 12, 14, 16]

- **Q1** = **4와 6 사이** > (4 + 6) / 2 = **5**
- **Q2** = **8과 10 사이** > (8 + 10) / 2 = **9**
- **Q3** = **12와 14 사이** > (12 + 14) / 2 = **13**

### 사분위수 구하는 방법

데이터 : [**3, 5, 7, 8**, 9, **11, 13, 15, 17**]

- **Q1(하위 절반)** = [3, 5, 7, 9] → **중간** = (5 + 7) / 2 = **6**
- **Q2(중앙값)** = **데이터의 가운데 값** = **9**
- **Q3(상위 절반)** = [11, 13, 15, 17] → **중간** = (13 + 15) / 2 = **14**

### 사분위수를 파이썬으로 구해보자

- **Numpy 사용**

```python
import numpy as np

data = [3, 5, 7, 8, 9, 11, 13, 15, 17]

q1 = np.percentile(data, 25)
q2 = np.percentile(data, 50)  # 또는 np.median(data)
q3 = np.percentile(data, 75)

print(f"Q1: {q1}, Q2: {q2}, Q3: {q3}")
```

- **Pandas 사용**

```python
import pandas as pd
data = [3, 5, 7, 8, 9, 11, 13, 15, 17]

s = pd.Series(data)
print(s.quantile([0.25, 0.5, 0.75]))
```

### **IQR이란?**

**IQR (Interquartile Range) = Q3 - Q1**  
통계에서 **중간 50% 데이터가 얼마나 퍼져 있는지를 나타내는 값** 입니다.  
→ 데이터를 가장 많이 포함하는 **가운데 50% 구간의 범위**

### **IQR로 할 수 있는 것**

#### 1. 이상치(Outiler) 탐지

- **IQR**은 **이상치(극단값)를 찾아낼 때** 자주 쓰입니다.
- 아래 기준을 벗어나면 **이상치로 간주**합니다.

```
X < Q1 - 1.5 * IQR
X > Q3 + 1.5 * IQR
```

참고로 **boxplot**에서 이상치 점으로 표시되는 기준도 이 기준입니다.

#### 2. 데이터의 집중도(산포도) 파악

- **IQR이 작으면** : 대부분의 값이 **중앙 근처에 모여있음**
- **IQR이 크면** : 데이터가 **넓게 퍼져 있음**
  → 평균이나 표준편차보다 이상치에 **영향을 덜 받아서** 신뢰성 있는 분산 측정이 가능합니다.

#### 3. 정상 범위 정의

- 예 : 병원 검사 수치에서 **"정상 범위"를 설정할 때**
- IQR 기반으로 **일반적인 값이 나올 구간** 을 정해 줄 수 있습니다.

#### 4. 데이터 전처리

- 이상치를 제거하거나 마스킹할 때
- 이상치를 기준으로 필터링

```python
df[df[column] < Q1 - 1.5*IQR]
```

#### 5. 특징 선택 / 모델 개선

- 이상치 제거로 머신러닝 모델의 **정확도 향상**이 가능합니다.
- 데이터의 분포 특성을 반영한 전처리로 **학습 안정성이 증가**합니다.

### ✅ 정리

- **사분위수**는 **데이터를 나누는 기준선**
- **IQR**은 그 사분위수 사이에 있는 **중간 50%의 폭(범위)**

---

## 기술 통계와 추론 통계

### 기술 통계

**데이터들을 한눈에 보는 방법** 중 하나이다.  
**데이터들의 평균**과 데이터들이 어떻게 분포되어있는지 **분산과 표준편차**로 보여준다.

대표적인 값들은 아래와 같다.

- **데이터 수(count)**
  **전체 관측값(Non-Null) 개수**  
  100개 중 5개가 결측치면 = 95개

- **평균(mean)**
  데이터 값의 **평균**

- **표준편차(std; standard deviation)**
  데이터가 **평균으로부터 얼마나 퍼져 있는지**를 나타내는 척도

- **최솟값(min)**
  **가장 작은 관측값**

- **사분위수 범위(25%, 50%, 75%)**

  - 25% (Q1): **하위 25% 지점**
  - 50% (Q2; **median**): **중앙값**
  - 75% (Q3): 상위 25%를 남긴 **75% 지점**

- **최댓값(max)**
  **가장 큰 관측값**

### **기술통계 시각화**

#### **1. 히스토그램**

- 데이터의 분포(빈도)를 **막대 형태**로 보여줍니다.
- **bins** 개수를 조절해서 **구간 세밀도를 조정**할 수 있습니다.

```python
import matplotlib.pyplot as plt
import seaborn as sns

sns.histplot(df['col'], bins=20, kde=False)
plt.title('히스토그램 – 분포 확인')
plt.xlabel('값')
plt.ylabel('빈도')
plt.show()
```

- **값이 어떻게 분포되어있는지(정규분포인지 왜도인지)** 빠르게 보고싶을 때 사용하면 좋습니다.

#### **2. 커널 밀도 추정(KDE)**

- 히스토그램의 부드러운 버전으로, **분포 곡선**을 그려줍니다.

```python
sns.kedplot(df['col'], shade=True) # shade = Treu > 곡선 아래의 공간을 채워서 보여줌
plt.show
```

#### **3. 박스플롯(Boxplot)**

- **Q1, Q2(중앙값), Q3, IQR 과 이상치**를 한눈에 보여줍니다.
- 이상치를 시각적으로 식별이 가능합니다.

```python
sns.boxplot(x='group', y='col', data=df)
plt.title('박스플롯 – 그룹별 분포 비교')
plt.show()
```

### **추론 통계**

추론통계는 **표본**으로부터 얻은 정보를 바탕으로 **모집단**에 대한 결론으니 예측을 내리는 통계 기법입니다.

- 모집단이 너무 커서 조사하기 어렵거나 불가능할 때
- 일부(표본)만 조사해도 충분한 정보를 얻고 일반화 할 때 사용합니다.

### **추론 통계의 주요 기법**

#### **1. 파라미터 추정**

- **표본에서의 값으로 모집단의 파라미터 추정**합니다.(점 추정)
  모집단 평균 A → 표본 평균 a
  모집단 비율 B → 표본 비율 b
- 쉽고 직관적이지만, **"얼마나 정확한지"는 알려주지 않습니다.**

```python
import pandas as pd
df = pd.read_csv('.../.../data.csv')

sample_mean = df['col'].mean()
print('모평균의 점추정치 : ', sample_mean)
```

- 그래서 **"이 구간 안에 진짜 파라미터가 있을 확률이 약 ??%"**라는 신뢰들을 더해줍니다.(구간 추정)

```python
sample_std = df['col'].std(ddof=1) # 표본표준편차 자유도 n-1
n_sample = len(df) # 표본 크기
confidence_level = 0.95 #유의수준 0.95

confidence_interval = stats.t.interval(confidence_level, loc=sample_mean,
				scale=sample_std/(n_sample**0.5),
				df = n_sample-1)

print('구간추정치 : ', confidence_interval)
```

#### **2. 가설 검정**

- **귀무가설 vs 대립가설**
- **p-값(p-value) or 유의수준(α) 기준으로 채택/기각을 검정**하는 방법입니다.

| 검정 종류     | 용도                            |
| ------------- | ------------------------------- |
| z-검정        | σ(모집단 표준편차) 알고 있을 때 |
| t-검정        | σ 모를 때, 표본 n이 작을 때     |
| 카이제곱 검정 | 범주형 데이터 독립성 검정       |
| ANOVA         | 세 집단 이상 평균 비교          |

#### **3. 회귀 분석**

- **독립 변수가 종속변수에 미치는 영향**을 확인할 때 사용합니다.
- 이를 통해서 **미래 값을 예측**하거나 **변수 간 관계를 이해**할 수 있습니다.

### 추론 통계의 한계

1. 표본이 모집단을 잘 설명해야 함
2. 관측치 간 서로 독립적이어야 함 (서로 영향을 주고받지 않아야 한다.)
3. 정규성, 등분산성 등 필요한 경우가 많음
   - 정규성이 깨지면 **p-값과 신뢰구간이 부정확해짐**
   - 등분산성이 깨지면 **t-검정 결과를 신뢰할 수 없고 신뢰 구간이 부정확해짐**
4. 표본은 크면 클수록 정확도가 올라감

### ✅ 정리

- **기술 통계** : **데이터의 요약본**  
  (Count, Mean, Std, Min, Q1/Q2/Q3, Max, ...) **히스토그램·KDE(shade)·박스플롯으로 분포를 시각화**

- **추론 통계** : **표본을 바탕으로 모집단을 추정, 판단하는 도구**.  
  **표본 통계를 통해 모집단 파라미터** 점·구간 추정, 가설 검정(z·t·χ²·ANOVA), 회귀분석으로 **관계 모델링·예측**
